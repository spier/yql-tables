<?xml version="1.0" encoding="UTF-8" ?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
      <author>Sebastian Spier (http://twitter.com/#!/sebastianspier/)</author>
      <description>Mashup of topsy.com, klout.com, peerindex.net</description>
      <documentationURL></documentationURL>
      <sampleQuery></sampleQuery>
  </meta>
  <bindings>
    <select itemPath="" produces="JSON">
      <urls>
        <url></url>
      </urls>
      <inputs>
					<key id="username" type="xs:string" paramType="variable" required="true"/>
          <key id="klout_api_key" type="xs:string" paramType="variable" required="true"/>
					<key id="peerindex_api_key" type="xs:string" paramType="variable" required="true"/>
      </inputs>
      <execute><![CDATA[
	
				klout_results = y.query('SELECT * FROM klout.user.show WHERE users=@username AND api_key=@api_key',{api_key:klout_api_key,username:username});
				peerindex_results = y.query('SELECT * FROM peerindex.profile WHERE id=@username AND api_key=@api_key',{api_key:peerindex_api_key,username:username});
	
				y.log(klout_results);
				y.log(peerindex_results);
				
				response.object = <root><klout>{klout_results}</klout><peerindex>{peerindex_results}</peerindex></root>;
	
      ]]></execute>
    </select>
  </bindings>
</table>